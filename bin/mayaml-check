#!/usr/bin/env ruby
# frozen_string_literal: true

require "mayaml"

def puts_ussage_message
  puts <<-END_HELP
    Ussage: mayaml-check <path_to_yaml_file>
  END_HELP
end

def main(args)
  yaml_path = args.shift
  if yaml_path.nil?
    puts_ussage_message
    exit 1
  elsif File.exist? yaml_path
    Mayaml.accounts_from_file(yaml_path).each { |acc| puts acc.to_str }
  else
    puts "Could not find file: #{yaml_path}"
    exit 1
  end
end

main ARGV
